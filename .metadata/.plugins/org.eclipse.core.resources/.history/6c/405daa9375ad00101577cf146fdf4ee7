#ifndef STM32_SPI_LINK_H
#define STM32_SPI_LINK_H

#include "stm32l4xx_hal.h"
#include <stdint.h>
#include <stdbool.h>
#include <stdio.h>
#include <string.h>

// MAX SPI BUFFER SIZE
#define BUFFER_SIZE 64

//Pi -> STM32 Commands
typedef enum {
	SET_CONFIG = 0x01,
	SEND_TEXT = 0x02

} rx_commands_t;

typedef enum {
	//STM32 -> Pi Commands
	START_UP = 0x80,
	LOG_MESSAGE = 0x81,
	STATUS_UPDATE = 0x82
} tx_commands_t;



void link_init(SPI_HandleTypeDef *spi, bool* packet_recieved);
void send_packet_to_pi(tx_commands_t command, const uint8_t* payload, uint16_t length);
void process_packet();
void process_text(char* text, uint16_t len);

#endif

